(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[145],{285:(e,t,r)=>{"use strict";r.d(t,{$:()=>l});var a=r(5155);r(2115);var s=r(9708),o=r(2085),i=r(9434);let n=(0,o.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function l(e){let{className:t,variant:r,size:o,asChild:l=!1,...d}=e,c=l?s.DX:"button";return(0,a.jsx)(c,{"data-slot":"button",className:(0,i.cn)(n({variant:r,size:o,className:t})),...d})}},968:(e,t,r)=>{"use strict";r.d(t,{b:()=>n});var a=r(2115),s=r(3655),o=r(5155),i=a.forwardRef((e,t)=>(0,o.jsx)(s.sG.label,{...e,ref:t,onMouseDown:t=>{var r;t.target.closest("button, input, select, textarea")||(null==(r=e.onMouseDown)||r.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));i.displayName="Label";var n=i},1788:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(9946).A)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]])},2523:(e,t,r)=>{"use strict";r.d(t,{p:()=>o});var a=r(5155);r(2115);var s=r(9434);function o(e){let{className:t,type:r,...o}=e;return(0,a.jsx)("input",{type:r,"data-slot":"input",className:(0,s.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...o})}},2525:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(9946).A)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},3655:(e,t,r)=>{"use strict";r.d(t,{hO:()=>l,sG:()=>n});var a=r(2115),s=r(7650),o=r(9708),i=r(5155),n=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{let r=(0,o.TL)(`Primitive.${t}`),s=a.forwardRef((e,a)=>{let{asChild:s,...o}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,i.jsx)(s?r:t,{...o,ref:a})});return s.displayName=`Primitive.${t}`,{...e,[t]:s}},{});function l(e,t){e&&s.flushSync(()=>e.dispatchEvent(t))}},3717:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(9946).A)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},4135:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>y,dynamic:()=>b});var a=r(5155),s=r(2115),o=r(5695),i=r(285),n=r(6695),l=r(2523),d=r(8539),c=r(5057),u=r(4616),h=r(7434),p=r(8883),v=r(3717),m=r(2525),x=r(4229),g=r(1788),f=r(6671);let b="force-dynamic";function y(){let e=(0,o.useRouter)(),[t,r]=(0,s.useState)([]),[b,y]=(0,s.useState)(null),[j,w]=(0,s.useState)({title:"",company:"",position:"",content:""}),[N,k]=(0,s.useState)(!1),[C,A]=(0,s.useState)(!1);(0,s.useEffect)(()=>{S()},[]);let S=async()=>{try{let t=localStorage.getItem("token");if(!t)return void e.push("/auth/login");let a=await fetch("http://localhost:3001/api/cover-letters",{headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"}});if(a.ok){let e=await a.json();r(e)}}catch(e){console.error("Error loading cover letters:",e),f.o.error("Failed to load cover letters")}},M=()=>{y(null),w({title:"",company:"",position:"",content:""}),A(!0)},_=e=>{y(e),w({title:e.title,company:e.company,position:e.position,content:e.content}),A(!0)},z=async()=>{k(!0);try{let e=localStorage.getItem("token"),t=b?"http://localhost:3001/api/cover-letters/".concat(b._id):"http://localhost:3001/api/cover-letters",r=b?"PUT":"POST",a=await fetch(t,{method:r,headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify(j)});a.ok?(await a.json(),f.o.success(b?"Cover letter updated!":"Cover letter created!"),A(!1),S(),y(null)):f.o.error("Failed to save cover letter")}catch(e){console.error("Error saving cover letter:",e),f.o.error("Error saving cover letter")}finally{k(!1)}},E=async e=>{if(confirm("Are you sure you want to delete this cover letter?"))try{let t=localStorage.getItem("token");(await fetch("http://localhost:3001/api/cover-letters/".concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"}})).ok?(r(t=>t.filter(t=>t._id!==e)),f.o.success("Cover letter deleted successfully"),(null==b?void 0:b._id)===e&&(y(null),A(!1))):f.o.error("Failed to delete cover letter")}catch(e){console.error("Error deleting cover letter:",e),f.o.error("Error deleting cover letter")}},L=async e=>{try{let t=localStorage.getItem("token"),r=await fetch("http://localhost:3001/api/cover-letters/".concat(e._id,"/export/pdf"),{headers:{Authorization:"Bearer ".concat(t)}});if(r.ok){let t=await r.blob(),a=window.URL.createObjectURL(t),s=document.createElement("a");s.href=a,s.download="".concat(e.title,"_Cover_Letter.pdf"),document.body.appendChild(s),s.click(),window.URL.revokeObjectURL(a),document.body.removeChild(s),f.o.success("Cover letter downloaded successfully")}else f.o.error("Failed to download cover letter")}catch(e){console.error("Error downloading cover letter:",e),f.o.error("Error downloading cover letter")}},R=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return(0,a.jsx)("div",{className:"min-h-screen bg-background",children:(0,a.jsxs)("div",{className:"container mx-auto py-8",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold",children:"Cover Letters"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Create and manage your professional cover letters"})]}),(0,a.jsxs)(i.$,{onClick:M,children:[(0,a.jsx)(u.A,{className:"w-4 h-4 mr-2"}),"New Cover Letter"]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,a.jsx)("div",{className:"lg:col-span-1",children:(0,a.jsxs)(n.Zp,{children:[(0,a.jsx)(n.aR,{children:(0,a.jsxs)(n.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(h.A,{className:"w-5 h-5"}),"Your Cover Letters"]})}),(0,a.jsx)(n.Wu,{children:0===t.length?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(p.A,{className:"w-12 h-12 mx-auto mb-4 text-muted-foreground opacity-50"}),(0,a.jsx)("p",{className:"text-muted-foreground mb-4",children:"No cover letters yet"}),(0,a.jsx)(i.$,{onClick:M,size:"sm",children:"Create Your First Cover Letter"})]}):(0,a.jsx)("div",{className:"space-y-3",children:t.map(e=>(0,a.jsx)("div",{className:"p-3 border rounded-lg cursor-pointer transition-colors ".concat((null==b?void 0:b._id)===e._id?"border-primary bg-primary/5":"hover:bg-muted/50"),onClick:()=>{y(e),A(!1)},children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h4",{className:"font-medium text-sm",children:e.title}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:[e.position," at ",e.company]}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Updated: ",R(e.updatedAt)]})]}),(0,a.jsxs)("div",{className:"flex gap-1",children:[(0,a.jsx)(i.$,{variant:"ghost",size:"sm",onClick:t=>{t.stopPropagation(),_(e)},children:(0,a.jsx)(v.A,{className:"w-3 h-3"})}),(0,a.jsx)(i.$,{variant:"ghost",size:"sm",onClick:t=>{t.stopPropagation(),E(e._id)},className:"text-destructive hover:text-destructive",children:(0,a.jsx)(m.A,{className:"w-3 h-3"})})]})]})},e._id))})})]})}),(0,a.jsx)("div",{className:"lg:col-span-2",children:C?(0,a.jsxs)(n.Zp,{children:[(0,a.jsx)(n.aR,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(n.ZB,{children:b?"Edit Cover Letter":"Create New Cover Letter"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(i.$,{variant:"outline",onClick:()=>{A(!1),y(null)},children:"Cancel"}),(0,a.jsxs)(i.$,{onClick:z,disabled:N,children:[(0,a.jsx)(x.A,{className:"w-4 h-4 mr-2"}),N?"Saving...":"Save"]})]})]})}),(0,a.jsxs)(n.Wu,{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(c.J,{htmlFor:"title",children:"Title"}),(0,a.jsx)(l.p,{id:"title",value:j.title,onChange:e=>w(t=>({...t,title:e.target.value})),placeholder:"e.g., Software Engineer Application"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(c.J,{htmlFor:"company",children:"Company"}),(0,a.jsx)(l.p,{id:"company",value:j.company,onChange:e=>w(t=>({...t,company:e.target.value})),placeholder:"Company name"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(c.J,{htmlFor:"position",children:"Position"}),(0,a.jsx)(l.p,{id:"position",value:j.position,onChange:e=>w(t=>({...t,position:e.target.value})),placeholder:"Job title"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(c.J,{htmlFor:"content",children:"Cover Letter Content"}),(0,a.jsx)(d.T,{id:"content",rows:15,value:j.content,onChange:e=>w(t=>({...t,content:e.target.value})),placeholder:"Write your cover letter here...",className:"resize-none"})]})]})]}):b?(0,a.jsxs)(n.Zp,{children:[(0,a.jsx)(n.aR,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(n.ZB,{children:b.title}),(0,a.jsxs)("p",{className:"text-muted-foreground",children:[b.position," at ",b.company]})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(i.$,{variant:"outline",onClick:()=>_(b),children:[(0,a.jsx)(v.A,{className:"w-4 h-4 mr-2"}),"Edit"]}),(0,a.jsxs)(i.$,{onClick:()=>L(b),children:[(0,a.jsx)(g.A,{className:"w-4 h-4 mr-2"}),"Download"]})]})]})}),(0,a.jsx)(n.Wu,{children:(0,a.jsx)("div",{className:"prose max-w-none",children:(0,a.jsx)("div",{className:"whitespace-pre-wrap text-sm leading-relaxed",children:b.content})})})]}):(0,a.jsx)(n.Zp,{children:(0,a.jsxs)(n.Wu,{className:"text-center py-12",children:[(0,a.jsx)(p.A,{className:"w-16 h-16 mx-auto mb-4 text-muted-foreground opacity-50"}),(0,a.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"No cover letter selected"}),(0,a.jsx)("p",{className:"text-muted-foreground mb-4",children:"Select a cover letter from the list or create a new one"}),(0,a.jsxs)(i.$,{onClick:M,children:[(0,a.jsx)(u.A,{className:"w-4 h-4 mr-2"}),"Create New Cover Letter"]})]})})})]})]})})}},4229:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(9946).A)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},4616:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(9946).A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},5029:(e,t,r)=>{Promise.resolve().then(r.bind(r,4135))},5057:(e,t,r)=>{"use strict";r.d(t,{J:()=>i});var a=r(5155);r(2115);var s=r(968),o=r(9434);function i(e){let{className:t,...r}=e;return(0,a.jsx)(s.b,{"data-slot":"label",className:(0,o.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...r})}},5695:(e,t,r)=>{"use strict";var a=r(8999);r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}}),r.o(a,"useSearchParams")&&r.d(t,{useSearchParams:function(){return a.useSearchParams}})},6695:(e,t,r)=>{"use strict";r.d(t,{BT:()=>l,Wu:()=>d,ZB:()=>n,Zp:()=>o,aR:()=>i});var a=r(5155);r(2115);var s=r(9434);function o(e){let{className:t,...r}=e;return(0,a.jsx)("div",{"data-slot":"card",className:(0,s.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...r})}function i(e){let{className:t,...r}=e;return(0,a.jsx)("div",{"data-slot":"card-header",className:(0,s.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...r})}function n(e){let{className:t,...r}=e;return(0,a.jsx)("div",{"data-slot":"card-title",className:(0,s.cn)("leading-none font-semibold",t),...r})}function l(e){let{className:t,...r}=e;return(0,a.jsx)("div",{"data-slot":"card-description",className:(0,s.cn)("text-muted-foreground text-sm",t),...r})}function d(e){let{className:t,...r}=e;return(0,a.jsx)("div",{"data-slot":"card-content",className:(0,s.cn)("px-6",t),...r})}},7434:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(9946).A)("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},8539:(e,t,r)=>{"use strict";r.d(t,{T:()=>o});var a=r(5155);r(2115);var s=r(9434);function o(e){let{className:t,...r}=e;return(0,a.jsx)("textarea",{"data-slot":"textarea",className:(0,s.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),...r})}},8883:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(9946).A)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]])},9434:(e,t,r)=>{"use strict";r.d(t,{cn:()=>o});var a=r(2596),s=r(9688);function o(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.QP)((0,a.$)(t))}}},e=>{var t=t=>e(e.s=t);e.O(0,[455,671,441,684,358],()=>t(5029)),_N_E=e.O()}]);